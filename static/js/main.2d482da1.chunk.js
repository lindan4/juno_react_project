(this["webpackJsonpreact-proj"]=this["webpackJsonpreact-proj"]||[]).push([[0],{104:function(e,t,n){e.exports={searchResultsLoadingContainer:"SearchResults_searchResultsLoadingContainer__V9_3L",searchResultsContainer:"SearchResults_searchResultsContainer__2htDh"}},128:function(e,t,n){e.exports={mainContainer:"Main_mainContainer__3ma2e"}},132:function(e,t,n){e.exports={outerProfileContainer:"Profile_outerProfileContainer__2RWFo"}},133:function(e,t,n){e.exports={errorPageContainer:"ErrorPage_errorPageContainer__16JPt"}},150:function(e,t,n){},182:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(47),s=n.n(i),o=(n(150),n(15)),c=n(122),l=n(25),u=n(3),d=n(7),h=n(11),j=n(12),f=n(237),b=n(238),m=n(239),p=n(240),O=n(241),g=n(242),v=n(243),x=n(13),y=n(76),w=n.n(y),C=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[],r=Object(x.a)(t);try{for(r.s();!(e=r.n()).done;){var a=e.value;n.push(w.a.get("https://www.themealdb.com/api/json/v1/1/lookup.php?i=".concat(a)).then((function(e){return e.data.meals[0]})))}}catch(i){r.e(i)}finally{r.f()}return Promise.all(n)},S=n(99),I=n.n(S),k=n(2),P=function(e){var t=e.onItemClick,n=void 0===t?function(){}:t,a=Object(r.useState)({}),i=Object(o.a)(a,2),s=i[0],c=i[1],l=Object(r.useState)(!1),u=Object(o.a)(l,2),d=u[0],h=u[1];Object(r.useEffect)((function(){h(!0),new Promise((function(e,t){w.a.get("https://www.themealdb.com/api/json/v1/1/random.php").then((function(t){e(t.data.meals[0])})).catch((function(e){console.log(e),t({})}))})).then((function(e){c(e),h(!1)}))}),[]);return Object(k.jsx)(g.a,{component:v.a,elevation:1,onClick:function(){return n(s.idMeal)},sx:{display:"flex",flexDirection:"row",justifyContent:"center"},children:d?Object(k.jsx)(O.a,{sx:{paddingTop:30,paddingBottom:30}}):Object(k.jsx)(b.a,{children:Object(k.jsxs)(m.a,{sx:M.cardContentStyle,children:[Object(k.jsx)("section",{className:I.a.randomRecipeTitleSection,children:Object(k.jsxs)(p.a,{variant:"h4",component:"p",children:["Featured Recipe: ",Object(k.jsx)("br",{})," ",s.strMeal]})}),Object(k.jsx)("section",{className:"random-recipe-content",children:Object(k.jsx)("img",{src:s.strMealThumb,alt:"Picture of random food dish",className:I.a.randomRecipeImage})})]})})})},M={cardContentStyle:{display:"flex",flexDirection:"row"}},F=n(244),L=function(e){var t=e.item,n=e.onItemClick,r=void 0===n?function(){}:n;return Object(k.jsx)(v.a,{sx:{width:200,borderRadius:10,height:350},onClick:function(){return r()},children:Object(k.jsxs)(b.a,{sx:{width:200,borderRadius:10,height:350,display:"flex",flexDirection:"column",justifyContent:"flex-start"},children:[Object(k.jsx)(F.a,{component:"img",src:t.strMealThumb,alt:"Picture of ".concat(t.strMeal)}),Object(k.jsx)(m.a,{children:Object(k.jsx)(p.a,{textOverflow:"ellipsis",variant:"h6",component:"p",children:t.strMeal})})]})})},R=n(230),_=n(245),T=n(125),N=n.n(T),U=function(e){var t=e.initialValue,n=void 0===t?"":t,a=e.onSearchPress,i=void 0===a?function(){}:a,s=Object(r.useState)(n),c=Object(o.a)(s,2),l=c[0],u=c[1];return Object(k.jsxs)(g.a,{component:"form",elevation:1,onSubmit:function(e){e.preventDefault(),i(l)},sx:{p:"5px 4px",display:"flex",alignItems:"center",width:"60%"},children:[Object(k.jsx)(R.a,{style:{display:"flex",flex:12},id:"search-field",label:"Search",variant:"outlined",placeholder:"Search for recipes",value:l,onChange:function(e){return u(e.target.value)}}),Object(k.jsx)(_.a,{type:"submit","aria-label":"search",children:Object(k.jsx)(N.a,{})})]})},D=n(226),A=n(227),H=n(134),B=n(234),E=n(233),W=n(246),J=n(247),V=n(248),Y=n(231),Q=n(235),z=n(249),K=n(41),Z=n(46),G=n(33),X="#b3a589",q="name-change-success",$="name-change-error",ee="password-change-success",te="passwords-same",ne="credentials-invalid",re=n(126),ae=Object(re.a)({apiKey:"AIzaSyAnuLhAlhS5LOWcBRVkffThsWZl4-C_nBA",authDomain:"juno-react-proj-meal.firebaseapp.com",projectId:"juno-react-proj-meal",storageBucket:"juno-react-proj-meal.appspot.com",messagingSenderId:"1062769252048",appId:"1:1062769252048:web:8ab64364b18bdc1694b0d5",measurementId:"G-FPJDK6F56S"}),ie=Object(G.e)(ae),se=Object(Z.c)(ae),oe=Object(G.c)(ie,"users"),ce=function(e){return new Promise((function(t,n){var r=se.currentUser.uid;Object(G.h)(Object(G.d)(oe,r),{favourites:Object(G.a)(e)}).then((function(){return t()})).catch((function(e){return n(e)}))}))},le=n(85),ue={name:"",uid:"",userFavourites:[],isUserLoggedIn:!1},de=Object(le.b)({name:"user",initialState:ue,reducers:{logOnUser:function(e){e.isUserLoggedIn=!0},logOutUser:function(e){e.isUserLoggedIn=!1},setReduxName:function(e,t){e.name=t.payload},setUserId:function(e,t){e.uid=t.payload},setUserFavourites:function(e,t){e.userFavourites=t.payload},clearUserState:function(){return ue}}}),he=de.actions,je=he.setReduxName,fe=he.setUserId,be=he.setUserFavourites,me=he.clearUserState,pe=he.logOnUser,Oe=(he.logOutUser,de.reducer),ge=function(e){var t=e.history,n=Object(K.c)(),a=Object(l.f)(),i=Object(r.useState)(!1),s=Object(o.a)(i,2),c=s[0],u=s[1];Object(r.useEffect)((function(){"/juno_react_project"===a.pathname||"/"===a.pathname?u(!1):u(!0)}),[a]);var d=Object(r.useState)(null),h=Object(o.a)(d,2),j=h[0],f=h[1],b=Object(K.d)((function(e){return e.user.isUserLoggedIn})),m=Object(r.useState)(!1),O=Object(o.a)(m,2),g=O[0],v=O[1],x=Object(r.useState)(""),y=Object(o.a)(x,2),w=y[0],C=y[1],S=Object(r.useState)(""),I=Object(o.a)(S,2),P=I[0],M=I[1],F=Object(r.useState)(""),L=Object(o.a)(F,2),T=L[0],N=L[1],U=Object(r.useState)(""),q=Object(o.a)(U,2),$=q[0],ee=q[1],te=Object(r.useState)(!1),ne=Object(o.a)(te,2),re=ne[0],ae=ne[1],ie=Object(r.useState)(!1),ce=Object(o.a)(ie,2),le=ce[0],ue=ce[1],de=Object(r.useState)(""),he=Object(o.a)(de,2),be=he[0],me=he[1],pe=Boolean(j),Oe=function(){f(null)},ge=function(){if(""!==$)return Object(k.jsxs)(E.a,{severity:"error",sx:{marginTop:2},children:[Object(k.jsx)(W.a,{children:"Error"}),$]})},xe=function(e){e.preventDefault(),""!==P&&""!==T?function(e,t){return new Promise((function(n,r){Object(Z.f)(se,e,t).then((function(e){n(e)})).catch((function(e){return r(e)}))}))}(P,T).then((function(){me("Logged in."),ue(!0),M(""),N(""),ae(!1)})).catch((function(e){ee("Unable to login. Please try again."),me(""),console.log(e)})):(ee("One or more fields are missing. Please input username and/or password and try again."),me(""))},ye=function(e){e.preventDefault(),""!==P&&""!==T&&""!==w&&function(e,t,n){return new Promise((function(r,a){Object(Z.b)(se,e,t).then((function(e){var t=e.user;Object(G.g)(Object(G.d)(oe,t.uid),{name:n}).then((function(){r({username:n,uid:t.uid})})).catch((function(e){return a(e)}))})).catch((function(e){return a(e)}))}))}(P,T,w).then((function(e){me("Success in creating account. You have been logged in automatically."),ue(!0),ee(""),ae(!1),v(!1),n(je(e.name)),n(fe(e.uid))})).catch((function(e){me(""),"auth/email-already-in-use"===e.code?ee("An account associated with this email exists."):"auth/weak-password"===e.code?ee("You password must be at least 6 characters."):ee(e.message),console.log(e)}))};return Object(k.jsxs)("div",{children:[Object(k.jsx)(_.a,{onClick:function(e){f(e.currentTarget)},children:Object(k.jsx)(D.a,{})}),c&&Object(k.jsx)(_.a,{onClick:function(){return t.push("/")},children:Object(k.jsx)(A.a,{})}),b?Object(k.jsxs)(H.a,{id:"basic-menu",anchorEl:j,open:pe,onClose:Oe,children:[Object(k.jsx)(B.a,{onClick:function(){Oe(),t.push("/profile")},children:"Profile"}),Object(k.jsx)(B.a,{onClick:function(){Oe(),t.push("/favourites")},children:"My Favourites"}),Object(k.jsx)(B.a,{onClick:function(){Oe(),new Promise((function(e,t){Object(Z.g)(se).then((function(){e()})).catch((function(e){return t(e)}))})).then((function(){t.push("/"),me("Successfully logged out."),ue(!0),console.log("Logged out")}))},children:"Logout"})]}):Object(k.jsx)(H.a,{id:"basic-menu",anchorEl:j,open:pe,onClose:Oe,children:Object(k.jsx)(B.a,{onClick:function(){Oe(),ee(""),ae(!0)},children:"Login"})}),!b&&Object(k.jsx)(Y.a,{onBackdropClick:function(){ae(!1),v(!1),M(""),N(""),ue(!1),ee(""),me("")},open:re,handleMenuAnchorClose:function(){return ae(!1)},children:function(){if(!b)return g?Object(k.jsxs)(z.a,{sx:ve.modalStyle,children:[Object(k.jsxs)(z.a,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[Object(k.jsx)(p.a,{variant:"h6",component:"h2",children:"Sign Up"}),Object(k.jsx)(J.a,{variant:"text",sx:{color:X},onClick:function(){me(""),ee(""),v(!1)},children:"Back"})]}),Object(k.jsxs)(z.a,{sx:{marginTop:1,alignItems:"flex-start",display:"flex",flexDirection:"column"},component:"form",onSubmit:ye,children:[Object(k.jsx)(R.a,{sx:{marginTop:4},id:"name-field",label:"Name",variant:"outlined",value:w,onChange:function(e){return C(e.target.value)}}),Object(k.jsx)(R.a,{sx:{marginTop:2},id:"email-field",label:"Email",variant:"outlined",value:P,type:"email",onChange:function(e){return M(e.target.value)}}),Object(k.jsx)(R.a,{sx:{marginTop:2},id:"password-field",label:"Password",variant:"outlined",value:T,type:"password",onChange:function(e){return N(e.target.value)}}),Object(k.jsx)(J.a,{sx:ve.containedButtonStyling,variant:"contained",id:"login-button",type:"submit",disabled:""===w||""===P||""===T,children:"Sign Up"}),ge()]})]}):Object(k.jsxs)(z.a,{sx:ve.modalStyle,children:[Object(k.jsx)(p.a,{variant:"h6",component:"h2",children:"Login"}),Object(k.jsxs)(z.a,{sx:{marginTop:1,alignItems:"flex-start",display:"flex",flexDirection:"column"},component:"form",onSubmit:xe,children:[Object(k.jsx)(R.a,{sx:{marginTop:4},id:"Email-field",label:"Email",variant:"outlined",value:P,type:"email",onChange:function(e){return M(e.target.value)}}),Object(k.jsx)(R.a,{sx:{marginTop:2},id:"password-field",label:"Password",variant:"outlined",value:T,type:"password",onChange:function(e){return N(e.target.value)}}),Object(k.jsx)(J.a,{sx:ve.containedButtonStyling,variant:"contained",id:"login-button",disabled:""===P||""===T,type:"submit",children:"Login"})]}),Object(k.jsxs)(p.a,{variant:"h6",component:"h2",sx:{mt:6},children:["Don't have an account? Click"," ",Object(k.jsx)(V.a,{style:{cursor:"pointer"},onClick:function(){v(!0),ee(""),me("")},children:"here"})," ","to sign up."]}),ge()]})}()}),Object(k.jsx)(Q.a,{open:le,autoHideDuration:4e3,onClose:function(){ue(!1),me("")},children:Object(k.jsx)(E.a,{severity:"success",sx:{width:"100%"},children:be})})]})},ve={modalStyle:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"#ffe4c4",border:"2px solid #000",boxShadow:24,p:4},containedButtonStyling:{marginTop:2,backgroundColor:X,":hover":{backgroundColor:"#736a57"}}},xe=n(228),ye=function(e){var t=e.item,n=e.onPress,r=void 0===n?function(){}:n,a=e.removeFromFavourite,i=void 0===a?function(){}:a;return Object(k.jsx)(v.a,{sx:{width:250,height:350},children:Object(k.jsx)(b.a,{onClick:function(){return r()},children:Object(k.jsxs)(m.a,{sx:{display:"flex",flexDirection:"column"},children:[Object(k.jsx)(F.a,{component:"img",src:t.strMealThumb,alt:"Picture of ".concat(t.strMeal)}),Object(k.jsxs)(m.a,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%"},children:[Object(k.jsx)(p.a,{children:t.strMeal}),Object(k.jsx)(_.a,{sx:{marginLeft:5},onClick:function(e){return i(e)},children:Object(k.jsx)(xe.a,{sx:{color:"pink"}})})]})]})})},t.mealId)},we=n(128),Ce=n.n(we),Se=n(35),Ie=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"renderHelmet",value:function(){return Object(k.jsx)(Se.a,{children:Object(k.jsx)("title",{children:"Home | The Recipe Archive"})})}},{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{className:Ce.a.mainContainer,children:[this.renderHelmet(),Object(k.jsxs)(f.a,{container:!0,spacing:1,width:"80%",justifyContent:"center",direction:"column",children:[Object(k.jsx)(f.a,{item:!0,sx:ke.itemStyle,children:Object(k.jsx)("h1",{children:"The Recipe Archive"})}),Object(k.jsx)(f.a,{item:!0,sx:ke.itemStyle,children:Object(k.jsx)(U,{onSearchPress:function(t){e.props.history.push("/search?keyword=".concat(t))}})}),Object(k.jsx)(f.a,{item:!0,sx:ke.lowerItemStyling,children:Object(k.jsx)(P,{onItemClick:function(t){return e.props.history.push("/meal?id=".concat(t))}})})]})]})}}]),n}(r.Component),ke={itemStyle:{display:"flex",flexDirection:"row",justifyContent:"center"},lowerItemStyling:{paddingBottom:20}},Pe=Ie,Me=n(104),Fe=n.n(Me),Le=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={resultsLoading:!1,searchResults:[],loading:!0},r}return Object(d.a)(n,[{key:"fetchQuery",value:function(e){var t=this;(function(e){return new Promise((function(t,n){w.a.get("https://www.themealdb.com/api/json/v1/1/search.php?s=".concat(e)).then((function(e){e.data.meals?t(e.data.meals):t([])})).catch((function(e){console.log(e),n(e)}))}))})(e).then((function(e){t.setState({searchResults:e,loading:!1})})).catch((function(){t.setState({searchResults:[],loading:!1})}))}},{key:"componentDidMount",value:function(){var e=new URLSearchParams(this.props.location.search).get("keyword");this.fetchQuery(e),this.keyword=e}},{key:"componentDidUpdate",value:function(e,t){if(e.location.search!==this.props.location.search){var n=new URLSearchParams(this.props.location.search).get("keyword");this.fetchQuery(n),this.keyword=n}}},{key:"renderLoadingHelmet",value:function(){return Object(k.jsx)(Se.a,{children:Object(k.jsx)("title",{children:"Loading..."})})}},{key:"renderResultsHelmet",value:function(){return Object(k.jsx)(Se.a,{children:Object(k.jsxs)("title",{children:["Search results for ",this.keyword," | The Recipe Archive"]})})}},{key:"renderContent",value:function(){var e=this;return this.state.loading?Object(k.jsxs)("div",{className:Fe.a.searchResultsLoadingContainer,children:[this.renderLoadingHelmet(),Object(k.jsx)(O.a,{})]}):Object(k.jsxs)("div",{className:Fe.a.searchResultsContainer,children:[this.renderResultsHelmet(),Object(k.jsxs)(f.a,{container:!0,display:"flex",alignItems:"center",direction:"column",children:[Object(k.jsxs)(f.a,{item:!0,container:!0,direction:"column",alignItems:"center",children:[Object(k.jsx)(U,{initialValue:this.keyword,onSearchPress:function(t){console.log("Outer value: ",t),e.props.history.push("/search?keyword=".concat(t))}}),Object(k.jsxs)(p.a,{sx:{marginTop:10},children:["There are"," ",this.state.searchResults?this.state.searchResults.length:0," ","results"]})]}),Object(k.jsx)(f.a,{container:!0,marginTop:10,direction:"row",justify:"flex-start",alignItems:"flex-start",width:"60%",children:this.state.searchResults.map((function(t){return Object(k.jsx)(f.a,{item:!0,paddingRight:2,paddingBottom:2,borderRadius:5,children:Object(k.jsx)(L,{item:t,onItemClick:function(){console.log("Clicked"),e.props.history.push("/meal?id=".concat(t.idMeal))}})},t.idMeal)}))})]})]})}},{key:"render",value:function(){return this.renderContent()}}]),n}(r.Component),Re=n(42),_e=n(229),Te=n(131),Ne=n.n(Te),Ue=n(77),De=n.n(Ue),Ae=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={mealInfo:{},mealIngredients:[],isFavourited:!1,loading:!1},r.addToFavourite=r.addToFavourite.bind(Object(Re.a)(r)),r.removeFromFavourite=r.removeFromFavourite.bind(Object(Re.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e,t=this,n=new URLSearchParams(this.props.location.search);this.id=n.get("id"),this.setState({loading:!0}),(e=this.id,new Promise((function(t,n){w.a.get("https://www.themealdb.com/api/json/v1/1/lookup.php?i=".concat(e)).then((function(e){if(console.log(e.data.meals),null!=e.data.meals){var r=e.data.meals[0],a=Object.entries(r),i=Object.values(a.filter((function(e){var t=Object(o.a)(e,2),n=t[0],r=t[1];return n.startsWith("strMeasure")&&""!==r&&null!==r}))),s=Object.values(a.filter((function(e){var t=Object(o.a)(e,2),n=t[0],r=t[1];return n.startsWith("strIngredient")&&""!==r&&null!==r}))).map((function(e,t){return[e[1],i[t][1]]}));t([r,s])}else n([])})).catch((function(e){console.log(e),n([])}))}))).then((function(e){var n=Object(o.a)(e,2),r=n[0],a=n[1];t.setState({mealInfo:r,mealIngredients:a,loading:!1})})).catch((function(){return t.setState({mealInfo:[],mealIngredients:[],loading:!1})}))}},{key:"renderIngredients",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e&&Array.isArray(e)&&e.length>0)return Object(k.jsx)("ul",{children:e.map((function(e){var t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(k.jsxs)("li",{children:[r," - ",n]},"".concat(n).concat(r))}))})}},{key:"renderSteps",value:function(){if(void 0!==this.state.mealInfo.strInstructions){var e=JSON.stringify(this.state.mealInfo.strInstructions);return e.substring(1,e.length-1).split("\\r\\n").filter((function(e){return""!==e&&!e.includes("STEP ")})).map((function(e,t){return Object(k.jsxs)("p",{children:[t+1,". ",e]},t)}))}}},{key:"addToFavourite",value:function(){var e=this;(function(e){var t=se.currentUser.uid;return new Promise((function(n,r){Object(G.h)(Object(G.d)(oe,t),{favourites:Object(G.b)(e)}).then((function(){return n()})).catch((function(e){return r(e)}))}))})(this.state.mealInfo.idMeal).then((function(){e.setState({isFavourited:!0})}))}},{key:"removeFromFavourite",value:function(){var e=this,t=this.state.mealInfo.idMeal;ce(t).then((function(){e.setState({isFavourited:!1})}))}},{key:"renderFavouriteButton",value:function(){var e=this.state.mealInfo.idMeal;return this.props.userFavourites.includes(e)?Object(k.jsx)(_.a,{disabled:!this.props.isUserLoggedIn,onClick:this.removeFromFavourite,children:Object(k.jsx)(xe.a,{sx:{color:"pink"}})}):Object(k.jsx)(_.a,{disabled:!this.props.isUserLoggedIn,onClick:this.addToFavourite,children:Object(k.jsx)(_e.a,{sx:{color:"none"}})})}},{key:"renderMealHelmet",value:function(){return Object(k.jsx)(Se.a,{children:Object(k.jsxs)("title",{children:[this.state.mealInfo.strMeal," | The Recipe Archive"]})})}},{key:"renderNoMealHelmet",value:function(){return Object(k.jsx)(Se.a,{children:Object(k.jsx)("title",{children:"Meal not found | The Recipe Archive"})})}},{key:"renderLoadingHelmet",value:function(){return Object(k.jsx)(Se.a,{children:Object(k.jsx)("title",{children:"Loading..."})})}},{key:"renderContent",value:function(){return this.state.loading?Object(k.jsxs)("div",{className:De.a.mealInfoLoadingContainer,children:[this.renderLoadingHelmet(),Object(k.jsx)(O.a,{})]}):(console.log(this.state.mealInfo),Ne.a.isEmpty(this.state.mealInfo)?Object(k.jsxs)("div",{className:De.a.outerMealInfoNoContentContainer,children:[this.renderNoMealHelmet(),Object(k.jsxs)("h1",{children:["The meal with the associated id ",this.id," does not exist."]})]}):Object(k.jsxs)("div",{className:De.a.outerMealInfoContainer,children:[this.renderMealHelmet(),Object(k.jsxs)(f.a,{container:!0,display:"flex",alignItems:"center",direction:"column",width:"80%",children:[Object(k.jsx)(f.a,{item:!0,children:Object(k.jsx)("img",{src:this.state.mealInfo.strMealThumb,alt:"Picture of ".concat(this.state.mealInfo.strMeal),style:{borderRadius:20,height:"100%"}})}),Object(k.jsxs)(f.a,{item:!0,sx:{paddingBottom:20,marginTop:10},children:[Object(k.jsxs)("div",{className:De.a.upperSectionMealContent,children:[Object(k.jsx)("h2",{children:this.state.mealInfo.strMeal}),this.renderFavouriteButton()]}),Object(k.jsxs)("div",{children:[Object(k.jsxs)("div",{children:[Object(k.jsx)("h6",{children:"Ingredients"}),this.renderIngredients(this.state.mealIngredients)]}),Object(k.jsxs)("div",{children:[Object(k.jsx)("h6",{children:"Steps"}),this.renderSteps()]})]})]})]})]}))}},{key:"render",value:function(){return this.renderContent()}}]),n}(r.Component),He=Object(K.b)((function(e){var t=e.user;return{userFavourites:t.userFavourites,isUserLoggedIn:t.isUserLoggedIn}}))(Ae),Be=n(89),Ee=n.n(Be),We=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={localFavouriteList:[],loading:!1},r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;localStorage.getItem("authUser")||this.props.history.push("/"),this.setState({loading:!0}),C(this.props.userFavourites||[]).then((function(t){e.setState({localFavouriteList:t.length>0?t:[],loading:!1})}))}},{key:"componentDidUpdate",value:function(e,t){var n=this;e.userFavourites.length!==this.props.userFavourites.length&&(this.setState({loading:!0}),C(this.props.userFavourites||[]).then((function(e){n.setState({localFavouriteList:e.length>0?e:[],loading:!1})})))}},{key:"renderFavouriteHelmet",value:function(){return Object(k.jsx)(Se.a,{children:Object(k.jsx)("title",{children:"My Favourites"})})}},{key:"renderLoadingHelmet",value:function(){return Object(k.jsx)(Se.a,{children:Object(k.jsx)("title",{children:"Loading..."})})}},{key:"renderFavouriteContent",value:function(){var e=this;return this.state.loading?Object(k.jsxs)("div",{className:Ee.a.favouritesLoadingContainer,children:[this.renderLoadingHelmet(),Object(k.jsx)(O.a,{})]}):this.state.localFavouriteList.length>0?Object(k.jsxs)("div",{className:Ee.a.favouritesOuterContainer,children:[this.renderFavouriteHelmet(),Object(k.jsx)("h1",{children:"My Favourites"}),Object(k.jsx)(f.a,{container:!0,display:"flex",direction:"row",width:"80%",marginTop:3,children:this.state.localFavouriteList.map((function(t){return console.log(Object.keys(t)),Object(k.jsx)(f.a,{item:!0,paddingRight:3,paddingBottom:3,children:Object(k.jsx)(ye,{item:t,onPress:function(){return e.props.history.push("/meal?id=".concat(t.idMeal))},removeFromFavourite:function(e){e.stopPropagation(),ce(t.idMeal)}})},t.strMeal)}))})]}):Object(k.jsxs)("div",{className:Ee.a.noFavouritesOuterContainer,children:[this.renderFavouriteHelmet(),Object(k.jsx)("h3",{children:"You appear to have no favourites. Search for recipes and add them to your favourites to view them here."})]})}},{key:"render",value:function(){return this.renderFavouriteContent()}}]),n}(r.Component),Je=Object(K.b)((function(e){var t=e.user;return{userFavourites:t.userFavourites,isUserLoggedIn:t.isUserLoggedIn}}))(We),Ve=n(132),Ye=n.n(Ve),Qe=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={enteredName:r.props.name,currentPassword:"",newPassword:"",confirmNewPassword:"",errorMessage:"",successMessage:""},r.handleSubmit=r.handleSubmit.bind(Object(Re.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){localStorage.getItem("authUser")||this.props.history.push("/")}},{key:"componentDidUpdate",value:function(e,t){e.name!==this.props.name&&this.setState({enteredName:this.props.name})}},{key:"renderSuccessAlert",value:function(){if(this.state.successMessage.length>0)return Object(k.jsxs)(E.a,{severity:"success",sx:{marginTop:2},children:[Object(k.jsx)(W.a,{children:"Success"}),this.state.successMessage]})}},{key:"renderHelmet",value:function(){return Object(k.jsx)(Se.a,{children:Object(k.jsx)("title",{children:"Profile | The Recipe Archive"})})}},{key:"renderErrorAlert",value:function(){if(this.state.errorMessage.length>0)return Object(k.jsxs)(E.a,{severity:"error",sx:{marginTop:2},children:[Object(k.jsx)(W.a,{children:"Error"}),this.state.errorMessage]})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({errorMessage:"",successMessage:""});var n,r=[];this.state.enteredName!==this.props.name&&r.push((n=this.state.enteredName,new Promise((function(e,t){var r=se.currentUser.uid,a=Object(G.d)(oe,r);Object(G.h)(a,{name:n}).then((function(){e(q)})).catch((function(){t($)}))}))).then((function(e){if(e===q)return"Successfully changed name associated with account."}))),""!==this.state.currentPassword&&""!==this.state.newPassword&&""!==this.state.confirmNewPassword&&this.state.newPassword===this.state.confirmNewPassword&&r.push(function(e,t){var n=se.currentUser,r=Z.a.credential(n.email,e);return new Promise((function(a,i){Object(Z.e)(n,r).then((function(){e!==t?Object(Z.h)(n,t).then((function(){a(ee)})).catch((function(){return i("password-change-error")})):i(te)})).catch((function(){i(ne)}))}))}(this.state.currentPassword,this.state.newPassword).then((function(e){var t="";return e===ee&&(t="Your password has been successfully changed."),t}))),r.length>0?Promise.allSettled(r).then((function(e){var n="",r="";e.length>0&&e.forEach((function(e){console.log(e),"fulfilled"===e.status?n+="".concat(e.value," "):(e.value===$&&(r+="Unable to change name. Please try again."),e.value===ne?r+="The entered information is not present in our records. Please try again.":e.value===te?r+="The entered passwords (old and new) are the same. Please try again.":r="There appears to be an internal error. Please refresh the app and try again.")})),t.setState({currentPassword:"",newPassword:"",confirmNewPassword:"",successMessage:n,errorMessage:r})})):this.state.newPassword!==this.state.confirmNewPassword?this.setState({errorMessage:"The passwords do not match. Please try again."}):this.setState({errorMessage:"No information has been changed. Please try again."})}},{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{className:Ye.a.outerProfileContainer,children:[this.renderHelmet(),Object(k.jsxs)(f.a,{container:!0,width:"60%",borderRadius:10,border:"2px solid ".concat(X),direction:"column",padding:5,children:[Object(k.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(k.jsxs)(f.a,{container:!0,item:!0,direction:"column",children:[Object(k.jsx)("h4",{children:"Name"}),Object(k.jsx)(R.a,{value:this.state.enteredName,onChange:function(t){return e.setState({enteredName:t.target.value})}})]}),Object(k.jsxs)(f.a,{container:!0,item:!0,direction:"column",children:[Object(k.jsx)("h4",{children:"Password"}),Object(k.jsx)(R.a,{type:"password",sx:{paddingBottom:2},value:this.state.currentPassword,onChange:function(t){return e.setState({currentPassword:t.target.value})},label:"Current Password"}),Object(k.jsx)(R.a,{type:"password",sx:{paddingBottom:2},value:this.state.newPassword,onChange:function(t){return e.setState({newPassword:t.target.value})},label:"New Password"}),Object(k.jsx)(R.a,{type:"password",sx:{paddingBottom:2},value:this.state.confirmNewPassword,onChange:function(t){return e.setState({confirmNewPassword:t.target.value})},label:"Confirm New Password"})]}),Object(k.jsx)(J.a,{type:"submit",variant:"contained",children:"Apply"})]}),this.renderErrorAlert(),this.renderSuccessAlert()]})]})}}]),n}(r.Component),ze=Object(K.b)((function(e){var t=e.user;return{name:t.name,isUserLoggedIn:t.isUserLoggedIn}}))(Qe),Ke=n(133),Ze=n.n(Ke),Ge=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"renderHelmet",value:function(){return Object(k.jsx)(Se.a,{children:Object(k.jsx)("title",{children:"Error | The Recipe Archive"})})}},{key:"render",value:function(){return Object(k.jsxs)("div",{className:Ze.a.errorPageContainer,children:[this.renderHelmet(),Object(k.jsx)("h1",{children:"It appears that the page you are looking for does not exist. Please try again."})]})}}]),n}(r.Component),Xe=function(e){var t=e.exact,n=e.path,r=e.component;return Object(k.jsx)(l.a,{exact:t,path:n,render:function(e){return Object(k.jsxs)("div",{children:[Object(k.jsx)(ge,{history:e.history}),Object(k.jsx)(r,Object(c.a)({},e))]})}})};var qe=function(){var e=Object(Z.c)(ae),t=Object(G.e)(ae),n=Object(r.useState)(null),a=Object(o.a)(n,2),i=a[0],s=a[1],c=Object(K.c)();return Object(r.useEffect)((function(){var t=Object(Z.d)(e,(function(e){e&&!e.isAnonymous?(localStorage.setItem("authUser",e),c(fe(e.uid)),c(pe())):(localStorage.removeItem("authUser"),c(me())),s(e)}));return function(){return t()}}),[]),Object(r.useEffect)((function(){if(i&&!i.isAnonymous){var e=Object(G.f)(Object(G.d)(t,"users",i.uid),(function(e){e.exists()&&(c(je(e.data().name)),c(be(e.data().favourites||[])))}));return function(){return e()}}}),[i]),Object(k.jsxs)(l.c,{children:[Object(k.jsx)(Xe,{path:"/search",component:Le}),Object(k.jsx)(Xe,{path:"/meal",component:He}),Object(k.jsx)(Xe,{path:"/favourites",component:Je}),Object(k.jsx)(Xe,{path:"/profile",component:ze}),Object(k.jsx)(Xe,{exact:!0,path:"/",component:Pe}),Object(k.jsx)(Xe,{component:Ge})]})},$e=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,250)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),i(e),s(e)}))},et=n(97),tt=Object(le.a)({reducer:{user:Oe}});s.a.render(Object(k.jsx)(K.a,{store:tt,children:Object(k.jsx)(et.a,{basename:"/juno_react_project",children:Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsx)(qe,{})})})}),document.getElementById("root")),$e()},77:function(e,t,n){e.exports={mealInfoLoadingContainer:"MealInfo_mealInfoLoadingContainer__pmbpy",outerMealInfoContainer:"MealInfo_outerMealInfoContainer__306Im",outerMealInfoNoContentContainer:"MealInfo_outerMealInfoNoContentContainer__-cg8X",upperSectionMealContent:"MealInfo_upperSectionMealContent__TAj6A"}},89:function(e,t,n){e.exports={favouritesLoadingContainer:"MyFavourites_favouritesLoadingContainer__2ezSh",favouritesOuterContainer:"MyFavourites_favouritesOuterContainer__2NNUb",noFavouritesOuterContainer:"MyFavourites_noFavouritesOuterContainer__WZR1-"}},99:function(e,t,n){e.exports={randomRecipeTitleSection:"RandomRecipeItem_randomRecipeTitleSection__4vf6H",randomRecipeImage:"RandomRecipeItem_randomRecipeImage__3bRNc"}}},[[182,1,2]]]);
//# sourceMappingURL=main.2d482da1.chunk.js.map