(this["webpackJsonpreact-proj"]=this["webpackJsonpreact-proj"]||[]).push([[0],{100:function(e,t,n){e.exports={favouritesOuterContainer:"MyFavourites_favouritesOuterContainer__2NNUb",noFavouritesOuterContainer:"MyFavourites_noFavouritesOuterContainer__WZR1-"}},140:function(e,t,n){},171:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(46),i=n.n(s),c=(n(140),n(14)),o=n(118),u=n(25),l=n(4),d=n(7),h=n(12),j=n(13),f=n(226),b=n(227),p=n(228),m=n(229),v=n(230),O=n(231),x=n(52),g=n.n(x),y=n(2),w=function(e){var t=e.onItemClick,n=void 0===t?function(){}:t,a=Object(r.useState)({}),s=Object(c.a)(a,2),i=s[0],o=s[1];return Object(r.useEffect)((function(){new Promise((function(e,t){g.a.get("https://www.themealdb.com/api/json/v1/1/random.php").then((function(t){e(t.data.meals[0])})).catch((function(e){console.log(e),t({})}))})).then((function(e){o(e)}))}),[]),Object(y.jsx)(b.a,{component:p.a,elevation:1,sx:{display:"flex"},onClick:function(){return n(i.idMeal)},children:Object(y.jsx)(m.a,{children:Object(y.jsxs)(v.a,{sx:{display:"flex",flexDirection:"row"},children:[Object(y.jsx)("section",{className:"random-recipe-title-section",style:{display:"flex",flex:1,borderRadius:10,flexDirection:"row",justifyContent:"center"},children:Object(y.jsxs)(O.a,{variant:"h4",component:"p",children:["Featured Recipe: ",Object(y.jsx)("br",{})," ",i.strMeal]})}),Object(y.jsx)("section",{className:"random-recipe-content",children:Object(y.jsx)("img",{src:i.strMealThumb,alt:"Picture of random food dish",style:{borderTopRightRadius:10,borderBottomRightRadius:10,height:"100%"}})})]})})})},S=n(232),F=function(e){var t=e.item,n=e.onItemClick,r=void 0===n?function(){}:n;return Object(y.jsx)(p.a,{sx:{width:200,borderRadius:10,height:350},onClick:function(){return r()},children:Object(y.jsxs)(m.a,{sx:{width:200,borderRadius:10,height:350,display:"flex",flexDirection:"column",justifyContent:"flex-start"},children:[Object(y.jsx)(S.a,{component:"img",src:t.strMealThumb,alt:"Picture of ".concat(t.strMeal)}),Object(y.jsx)(v.a,{children:Object(y.jsx)(O.a,{textOverflow:"ellipsis",variant:"h6",component:"p",children:t.strMeal})})]})})},I=n(219),C=n(233),P=n(121),k=n.n(P),M=function(e){var t=e.initialValue,n=void 0===t?"":t,a=e.onSearchPress,s=void 0===a?function(){}:a,i=Object(r.useState)(n),o=Object(c.a)(i,2),u=o[0],l=o[1];return Object(y.jsxs)(b.a,{component:"form",elevation:1,onSubmit:function(e){e.preventDefault(),s(u)},sx:{p:"5px 4px",display:"flex",alignItems:"center",width:"60%"},children:[Object(y.jsx)(I.a,{style:{display:"flex",flex:12},id:"search-field",label:"Search",variant:"outlined",placeholder:"Search for recipes",value:u,onChange:function(e){return l(e.target.value)}}),Object(y.jsx)(C.a,{type:"submit","aria-label":"search",children:Object(y.jsx)(k.a,{})})]})},U=n(215),T=n(216),L=n(124),N=n(223),D=n(222),R=n(234),B=n(235),A=n(236),E=n(220),_=n(224),W=n(238),J=n(42),Q=n(45),V=n(33),Y="name-change-success",K="name-change-error",Z="password-change-success",z="passwords-same",G="credentials-invalid",H=n(122),q=Object(H.a)({apiKey:"AIzaSyAnuLhAlhS5LOWcBRVkffThsWZl4-C_nBA",authDomain:"juno-react-proj-meal.firebaseapp.com",projectId:"juno-react-proj-meal",storageBucket:"juno-react-proj-meal.appspot.com",messagingSenderId:"1062769252048",appId:"1:1062769252048:web:8ab64364b18bdc1694b0d5",measurementId:"G-FPJDK6F56S"}),X=Object(V.e)(q),$=Object(Q.c)(q),ee=Object(V.c)(X,"users"),te=function(e){return new Promise((function(t,n){var r=$.currentUser.uid;Object(V.h)(Object(V.d)(ee,r),{favourites:Object(V.a)(e)}).then((function(){return t()})).catch((function(e){return n(e)}))}))},ne=n(81),re={name:"",uid:"",userFavourites:[],isUserLoggedIn:!1},ae=Object(ne.b)({name:"user",initialState:re,reducers:{logOnUser:function(e){e.isUserLoggedIn=!0},logOutUser:function(e){e.isUserLoggedIn=!1},setReduxName:function(e,t){e.name=t.payload},setUserId:function(e,t){e.uid=t.payload},setUserFavourites:function(e,t){e.userFavourites=t.payload},addFavouriteById:function(e,t){e.userFavourites.push(t.payload)},removeFavouriteById:function(e,t){var n=e.userFavourites.filter((function(e){return e!==t.payload}));e.userFavourites=n},clearUserState:function(){return re}}}),se=ae.actions,ie=se.setReduxName,ce=se.setUserId,oe=se.setUserFavourites,ue=se.addFavouriteById,le=se.removeFavouriteById,de=se.clearUserState,he=se.logOnUser,je=(se.logOutUser,ae.reducer),fe=function(e){var t=e.history,n=Object(J.c)(),a=Object(u.f)(),s=Object(r.useState)(!1),i=Object(c.a)(s,2),o=i[0],l=i[1];Object(r.useEffect)((function(){"/"===a.pathname?l(!1):l(!0)}),[a]);var d=Object(r.useState)(null),h=Object(c.a)(d,2),j=h[0],f=h[1],b=Object(J.d)((function(e){return e.user.isUserLoggedIn})),p=Object(r.useState)(!1),m=Object(c.a)(p,2),v=m[0],x=m[1],g=Object(r.useState)(""),w=Object(c.a)(g,2),S=w[0],F=w[1],P=Object(r.useState)(""),k=Object(c.a)(P,2),M=k[0],Y=k[1],K=Object(r.useState)(""),Z=Object(c.a)(K,2),z=Z[0],G=Z[1],H=Object(r.useState)(""),q=Object(c.a)(H,2),X=q[0],te=q[1],ne=Object(r.useState)(!1),re=Object(c.a)(ne,2),ae=re[0],se=re[1],oe=Object(r.useState)(!1),ue=Object(c.a)(oe,2),le=ue[0],de=ue[1],he=Object(r.useState)(""),je=Object(c.a)(he,2),fe=je[0],pe=je[1],me=Boolean(j),ve=function(){f(null)},Oe=function(){if(""!==X)return Object(y.jsxs)(D.a,{severity:"error",sx:{marginTop:2},children:[Object(y.jsx)(R.a,{children:"Error"}),X]})},xe=function(e){e.preventDefault(),""!==M&&""!==z?function(e,t){return new Promise((function(n,r){Object(Q.f)($,e,t).then((function(e){n(e)})).catch((function(e){return r(e)}))}))}(M,z).then((function(){pe("Logged in."),de(!0),Y(""),G(""),se(!1)})).catch((function(e){te("Unable to login. Please try again."),pe(""),console.log(e)})):(te("One or more fields are missing. Please input username and/or password and try again."),pe(""))},ge=function(e){e.preventDefault(),""!==M&&""!==z&&""!==S&&function(e,t,n){return new Promise((function(r,a){Object(Q.b)($,e,t).then((function(e){var t=e.user;Object(V.g)(Object(V.d)(ee,t.uid),{name:n}).then((function(){r({username:n,uid:t.uid})})).catch((function(e){return a(e)}))})).catch((function(e){return a(e)}))}))}(M,z,S).then((function(e){te(""),se(!1),x(!1),n(ie(e.name)),n(ce(e.uid)),pe("Success in creating account. You have been logged in automatically.")})).catch((function(e){pe(""),te(e.message),console.log(e)}))};return Object(y.jsxs)("div",{children:[Object(y.jsx)(C.a,{onClick:function(e){f(e.currentTarget)},children:Object(y.jsx)(U.a,{})}),o&&Object(y.jsx)(C.a,{onClick:function(){return t.push("/")},children:Object(y.jsx)(T.a,{})}),b?Object(y.jsxs)(L.a,{id:"basic-menu",anchorEl:j,open:me,onClose:ve,children:[Object(y.jsx)(N.a,{onClick:function(){ve(),t.push("/profile")},children:"Profile"}),Object(y.jsx)(N.a,{onClick:function(){ve(),t.push("/favourites")},children:"My Favourites"}),Object(y.jsx)(N.a,{onClick:function(){ve(),new Promise((function(e,t){Object(Q.g)($).then((function(){e()})).catch((function(e){return t(e)}))})).then((function(){t.push("/"),pe("Successfully logged out."),de(!0),console.log("Logged out")}))},children:"Logout"})]}):Object(y.jsx)(L.a,{id:"basic-menu",anchorEl:j,open:me,onClose:ve,children:Object(y.jsx)(N.a,{onClick:function(){ve(),te(""),se(!0)},children:"Login"})}),!b&&Object(y.jsx)(E.a,{onBackdropClick:function(){return se(!1)},open:ae,handleMenuAnchorClose:function(){return se(!1)},children:function(){if(!b)return v?Object(y.jsxs)(W.a,{sx:be.modalStyle,children:[Object(y.jsxs)(W.a,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[Object(y.jsx)(O.a,{variant:"h6",component:"h2",children:"Sign Up"}),Object(y.jsx)(B.a,{variant:"text",onClick:function(){pe(""),te(""),x(!1)},children:"Back"})]}),Object(y.jsxs)(W.a,{sx:{marginTop:1,alignItems:"flex-start",display:"flex",flexDirection:"column"},component:"form",onSubmit:ge,children:[Object(y.jsx)(I.a,{sx:{marginTop:4},id:"name-field",label:"Name",variant:"outlined",value:S,onChange:function(e){return F(e.target.value)}}),Object(y.jsx)(I.a,{sx:{marginTop:2},id:"email-field",label:"Email",variant:"outlined",value:M,type:"email",onChange:function(e){return Y(e.target.value)}}),Object(y.jsx)(I.a,{sx:{marginTop:2},id:"password-field",label:"Password",variant:"outlined",value:z,type:"password",onChange:function(e){return G(e.target.value)}}),Object(y.jsx)(B.a,{sx:{marginTop:2},variant:"contained",id:"login-button",type:"submit",children:"Sign Up"}),Oe()]})]}):Object(y.jsxs)(W.a,{sx:be.modalStyle,children:[Object(y.jsx)(O.a,{variant:"h6",component:"h2",children:"Login"}),Object(y.jsxs)(W.a,{sx:{marginTop:1,alignItems:"flex-start",display:"flex",flexDirection:"column"},component:"form",onSubmit:xe,children:[Object(y.jsx)(I.a,{sx:{marginTop:4},id:"Email-field",label:"Email",variant:"outlined",value:M,type:"email",onChange:function(e){return Y(e.target.value)}}),Object(y.jsx)(I.a,{sx:{marginTop:2},id:"password-field",label:"Password",variant:"outlined",value:z,type:"password",onChange:function(e){return G(e.target.value)}}),Object(y.jsx)(B.a,{sx:{marginTop:2},variant:"contained",id:"login-button",type:"submit",children:"Login"})]}),Object(y.jsxs)(O.a,{variant:"h6",component:"h2",sx:{mt:6},children:["Don't have an account? Click"," ",Object(y.jsx)(A.a,{style:{cursor:"pointer"},onClick:function(){x(!0),te(""),pe("")},children:"here"})," ","to sign up."]}),Oe()]})}()}),Object(y.jsx)(_.a,{open:le,autoHideDuration:4e3,onClose:function(){de(!1),pe("")},children:Object(y.jsx)(D.a,{severity:"success",sx:{width:"100%"},children:fe})})]})},be={modalStyle:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"#ffe4c4",border:"2px solid #000",boxShadow:24,p:4}},pe=n(217),me=function(e){var t=e.item,n=e.onPress,r=void 0===n?function(){}:n,a=e.removeFromFavourite,s=void 0===a?function(){}:a;return Object(y.jsx)(p.a,{sx:{width:250,height:350},children:Object(y.jsx)(m.a,{onClick:function(){return r()},children:Object(y.jsxs)(v.a,{sx:{display:"flex",flexDirection:"column"},children:[Object(y.jsx)(S.a,{component:"img",src:t.strMealThumb,alt:"Picture of ".concat(t.strMeal)}),Object(y.jsxs)(v.a,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%"},children:[Object(y.jsx)(O.a,{children:t.strMeal}),Object(y.jsx)(C.a,{sx:{marginLeft:5},onClick:function(e){return s(e)},children:Object(y.jsx)(pe.a,{sx:{color:"pink"}})})]})]})})},t.mealId)},ve=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(y.jsx)("div",{className:"App",style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:Object(y.jsxs)(f.a,{container:!0,spacing:1,width:"80%",justifyContent:"center",direction:"column",children:[Object(y.jsx)(f.a,{item:!0,children:Object(y.jsx)("h1",{children:"The Recipe Archive"})}),Object(y.jsx)(f.a,{item:!0,sx:{display:"flex",flexDirection:"row",justifyContent:"center"},children:Object(y.jsx)(M,{onSearchPress:function(t){e.props.history.push("/search?keyword=".concat(t))}})}),Object(y.jsx)(f.a,{item:!0,children:Object(y.jsx)(w,{onItemClick:function(t){return e.props.history.push("/meal?id=".concat(t))}})})]})})}}]),n}(r.Component),Oe=n(237),xe=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).state={resultsLoading:!1,searchResults:[],loading:!0},r}return Object(d.a)(n,[{key:"fetchQuery",value:function(e){var t=this;(function(e){return new Promise((function(t,n){g.a.get("https://www.themealdb.com/api/json/v1/1/search.php?s=".concat(e)).then((function(e){e.data.meals?t(e.data.meals):t([])})).catch((function(e){console.log(e),n(e)}))}))})(e).then((function(e){t.setState({searchResults:e,loading:!1})})).catch((function(){t.setState({searchResults:[],loading:!1})}))}},{key:"componentDidMount",value:function(){var e=new URLSearchParams(this.props.location.search).get("keyword");this.fetchQuery(e),this.keyword=e}},{key:"componentDidUpdate",value:function(e,t){if(e.location.search!==this.props.location.search){var n=new URLSearchParams(this.props.location.search).get("keyword");this.fetchQuery(n),this.keyword=n}}},{key:"renderContent",value:function(){var e=this;return this.state.loading?Object(y.jsx)("div",{className:"search-results-container",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"100vw",height:"100vh"},children:Object(y.jsx)(Oe.a,{})}):Object(y.jsx)("div",{className:"search-results-container",style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:Object(y.jsxs)(f.a,{container:!0,display:"flex",alignItems:"center",direction:"column",children:[Object(y.jsxs)(f.a,{item:!0,container:!0,direction:"column",alignItems:"center",children:[Object(y.jsx)(M,{initialValue:this.keyword,onSearchPress:function(t){console.log("Outer value: ",t),e.props.history.push("/search?keyword=".concat(t))}}),Object(y.jsxs)(O.a,{sx:{marginTop:10},children:["There are"," ",this.state.searchResults?this.state.searchResults.length:0," ","results"]})]}),Object(y.jsx)(f.a,{container:!0,marginTop:10,direction:"row",justify:"flex-start",alignItems:"flex-start",width:"60%",children:this.state.searchResults.map((function(t){return Object(y.jsx)(f.a,{item:!0,paddingRight:2,paddingBottom:2,borderRadius:5,children:Object(y.jsx)(F,{item:t,onItemClick:function(){console.log("Clicked"),e.props.history.push("/meal?id=".concat(t.idMeal))}})},t.idMeal)}))})]})})}},{key:"render",value:function(){return this.renderContent()}}]),n}(r.Component),ge=n(40),ye=n(218),we=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).state={mealInfo:{},mealIngredients:[],isFavourited:!1},r.addToFavourite=r.addToFavourite.bind(Object(ge.a)(r)),r.removeFromFavourite=r.removeFromFavourite.bind(Object(ge.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;(function(e){return new Promise((function(t,n){g.a.get("https://www.themealdb.com/api/json/v1/1/lookup.php?i=".concat(e)).then((function(e){var n=e.data.meals[0],r=Object.entries(n),a=Object.values(r.filter((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return n.startsWith("strMeasure")&&""!==r}))),s=Object.values(r.filter((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return n.startsWith("strIngredient")&&""!==r}))).map((function(e,t){return[e[1],a[t][1]]}));t([n,s])})).catch((function(e){console.log(e),n(e)}))}))})(new URLSearchParams(this.props.location.search).get("id")).then((function(t){var n=Object(c.a)(t,2),r=n[0],a=n[1];e.setState({mealInfo:r,mealIngredients:a})})).catch((function(){return e.setState({mealInfo:[],mealIngredients:[]})}))}},{key:"renderIngredients",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e&&Array.isArray(e)&&e.length>0)return Object(y.jsx)("ul",{children:e.map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(y.jsxs)("li",{children:[r," - ",n]})}))})}},{key:"renderSteps",value:function(){if(void 0!==this.state.mealInfo.strInstructions){var e=JSON.stringify(this.state.mealInfo.strInstructions);return e.substring(1,e.length-1).split("\\r\\n").filter((function(e){return""!==e})).map((function(e,t){return Object(y.jsxs)("p",{children:[t+1,". ",e]})}))}}},{key:"addToFavourite",value:function(){var e=this,t=this.state.mealInfo.idMeal;(function(e){var t=$.currentUser.uid;return new Promise((function(n,r){Object(V.h)(Object(V.d)(ee,t),{favourites:Object(V.b)(e)}).then((function(){return n()})).catch((function(e){return r(e)}))}))})(t).then((function(){e.props.addFavouriteById(t),e.setState({isFavourited:!0})}))}},{key:"removeFromFavourite",value:function(){var e=this,t=this.state.mealInfo.idMeal;te(t).then((function(){e.props.removeFavouriteById(t),e.setState({isFavourited:!1})}))}},{key:"renderFavouriteButton",value:function(){var e=this.state.mealInfo.idMeal;return this.props.userFavourites.includes(e)?Object(y.jsx)(C.a,{disabled:!this.props.isUserLoggedIn,onClick:this.removeFromFavourite,children:Object(y.jsx)(pe.a,{sx:{color:"pink"}})}):Object(y.jsx)(C.a,{disabled:!this.props.isUserLoggedIn,onClick:this.addToFavourite,children:Object(y.jsx)(ye.a,{sx:{color:"none"}})})}},{key:"render",value:function(){return console.log(this.props.userFavourites),Object(y.jsx)("div",{className:"search-results-container",style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:Object(y.jsxs)(f.a,{container:!0,display:"flex",alignItems:"center",direction:"column",width:"80%",children:[Object(y.jsx)(f.a,{item:!0,children:Object(y.jsx)("img",{src:this.state.mealInfo.strMealThumb,alt:"Picture of ".concat(this.state.mealInfo.strMeal),style:{borderTopRightRadius:10,borderBottomRightRadius:10,height:"100%"}})}),Object(y.jsxs)(f.a,{item:!0,sx:{paddingBottom:20},children:[Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(y.jsx)("h2",{children:this.state.mealInfo.strMeal}),this.renderFavouriteButton()]}),Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("h6",{children:"Ingredients"}),this.renderIngredients(this.state.mealIngredients)]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("h6",{children:"Steps"}),this.renderSteps()]})]})]})]})})}}]),n}(r.Component),Se={addFavouriteById:ue,removeFavouriteById:le},Fe=Object(J.b)((function(e){var t=e.user;return{userFavourites:t.userFavourites,isUserLoggedIn:t.isUserLoggedIn}}),Se)(we),Ie=Object(ne.a)({reducer:{user:je}}),Ce=n(11),Pe=n(100),ke=n.n(Pe),Me=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).state={localFavouriteList:[]},r}return Object(d.a)(n,[{key:"fetchFavourites",value:function(){var e,t=[],n=Object(Ce.a)(this.props.userFavourites);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(g.a.get("https://www.themealdb.com/api/json/v1/1/lookup.php?i=".concat(r)).then((function(e){return e.data.meals[0]})))}}catch(a){n.e(a)}finally{n.f()}return Promise.all(t)}},{key:"componentDidMount",value:function(){var e=this;this.props.isUserLoggedIn||this.props.history.push("/"),this.fetchFavourites().then((function(t){e.setState({localFavouriteList:t})}))}},{key:"componentDidUpdate",value:function(e,t){var n=this;e.userFavourites.length>this.props.userFavourites&&this.fetchFavourites().then((function(e){n.setState({localFavouriteList:e})}))}},{key:"renderFavouriteContent",value:function(){var e=this,t=this.state.localFavouriteList,n=void 0===t?[]:t;return n.length>0?Object(y.jsxs)("div",{className:ke.a.favouritesOuterContainer,children:[Object(y.jsx)(O.a,{children:"My Favourites"}),Object(y.jsx)(f.a,{container:!0,display:"flex",alignItems:"center",direction:"row",width:"80%",children:n.map((function(t){return Object(y.jsx)(f.a,{item:!0,paddingRight:5,children:Object(y.jsx)(me,{item:t,onPress:function(){return e.props.history.push("/meal?id=".concat(t.idMeal))},removeFromFavourite:function(e){e.stopPropagation(),te(t.idMeal)}})},t.idMeal)}))})]}):Object(y.jsx)("div",{className:ke.a.noFavouritesOuterContainer,children:Object(y.jsx)("h3",{children:"You appear to have no favourites. Search for recipes and add them to your favourites to view them here."})})}},{key:"render",value:function(){return this.renderFavouriteContent()}}]),n}(r.Component),Ue={addFavouriteById:ue,removeFavouriteById:le},Te=Object(J.b)((function(e){var t=e.user;return{userFavourites:t.userFavourites,isUserLoggedIn:t.isUserLoggedIn}}),Ue)(Me),Le=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).state={enteredName:r.props.name,currentPassword:"",newPassword:"",confirmNewPassword:"",errorMessage:"",successMessage:""},r.handleSubmit=r.handleSubmit.bind(Object(ge.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.isUserLoggedIn||this.props.history.push("/")}},{key:"renderSuccessAlert",value:function(){if(this.state.successMessage.length>0)return Object(y.jsxs)(D.a,{severity:"success",sx:{marginTop:2},children:[Object(y.jsx)(R.a,{children:"Success"}),this.state.successMessage]})}},{key:"renderErrorAlert",value:function(){if(this.state.errorMessage.length>0)return Object(y.jsxs)(D.a,{severity:"error",sx:{marginTop:2},children:[Object(y.jsx)(R.a,{children:"Error"}),this.state.errorMessage]})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({errorMessage:"",successMessage:""});var n,r=[];this.state.enteredName!==this.props.name&&r.push((n=this.state.enteredName,new Promise((function(e,t){var r=$.currentUser.uid,a=Object(V.d)(ee,r);Object(V.h)(a,{name:n}).then((function(){e(Y)})).catch((function(){t(K)}))}))).then((function(e){if(e===Y)return"Successfully changed name associated with account."}))),""!==this.state.currentPassword&&""!==this.state.newPassword&&""!==this.state.confirmNewPassword&&this.state.newPassword===this.state.confirmNewPassword&&r.push(function(e,t){var n=$.currentUser,r=Q.a.credential(n.email,e);return new Promise((function(a,s){Object(Q.e)(n,r).then((function(){e!==t?Object(Q.h)(n,t).then((function(){a(Z)})).catch((function(){return s("password-change-error")})):s(z)})).catch((function(){s(G)}))}))}(this.state.currentPassword,this.state.newPassword).then((function(e){var t="";return e===Z&&(t="Your password has been successfully changed."),t}))),r.length>0?Promise.allSettled(r).then((function(e){var n="",r="";e.length>0&&e.forEach((function(e){console.log(e),"fulfilled"===e.status?n+="".concat(e.value," "):(e.value===K&&(r+="Unable to change name. Please try again."),e.value===G?r+="The entered information is not present in our records. Please try again.":e.value===z?r+="The entered passwords (old and new) are the same. Please try again.":r="There appears to be an internal error. Please refresh the app and try again.")})),t.setState({currentPassword:"",newPassword:"",confirmNewPassword:"",successMessage:n,errorMessage:r})})):this.state.newPassword!==this.state.confirmNewPassword?this.setState({errorMessage:"The passwords do not match. Please try again."}):this.setState({errorMessage:"No information has been changed. Please try again."})}},{key:"render",value:function(){var e=this;return Object(y.jsx)("div",{className:"search-results-container",style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:Object(y.jsxs)(f.a,{container:!0,width:"60%",borderRadius:10,border:"2px solid ".concat("#b3a589"),direction:"column",padding:5,children:[Object(y.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(y.jsxs)(f.a,{container:!0,item:!0,direction:"column",children:[Object(y.jsx)("h4",{children:"Name"}),Object(y.jsx)(I.a,{value:this.state.enteredName,onChange:function(t){return e.setState({enteredName:t.target.value})}})]}),Object(y.jsxs)(f.a,{container:!0,item:!0,direction:"column",children:[Object(y.jsx)("h4",{children:"Password"}),Object(y.jsx)(I.a,{type:"password",sx:{paddingBottom:2},value:this.state.currentPassword,onChange:function(t){return e.setState({currentPassword:t.target.value})},label:"Current Password"}),Object(y.jsx)(I.a,{type:"password",sx:{paddingBottom:2},value:this.state.newPassword,onChange:function(t){return e.setState({newPassword:t.target.value})},label:"New Password"}),Object(y.jsx)(I.a,{type:"password",sx:{paddingBottom:2},value:this.state.confirmNewPassword,onChange:function(t){return e.setState({confirmNewPassword:t.target.value})},label:"Confirm New Password"})]}),Object(y.jsx)(B.a,{type:"submit",variant:"contained",children:"Apply"})]}),this.renderErrorAlert(),this.renderSuccessAlert()]})})}}]),n}(r.Component),Ne=Object(J.b)((function(e){var t=e.user;return{name:t.name,isUserLoggedIn:t.isUserLoggedIn}}))(Le),De=function(e){var t=e.exact,n=e.path,r=e.component;return Object(y.jsx)(u.a,{exact:t,path:n,render:function(e){return Object(y.jsxs)("div",{children:[Object(y.jsx)(fe,{history:e.history}),Object(y.jsx)(r,Object(o.a)({},e))]})}})};var Re=function(){var e=Object(Q.c)(q),t=Object(V.e)(q),n=Object(r.useState)(null),a=Object(c.a)(n,2),s=a[0],i=a[1];return Object(r.useEffect)((function(){var t=Object(Q.d)(e,(function(e){e&&!e.isAnonymous?(Ie.dispatch(ce(e.uid)),Ie.dispatch(he())):Ie.dispatch(de()),i(e)}));return function(){return t()}}),[]),Object(r.useEffect)((function(){if(s&&!s.isAnonymous){var e=Object(V.f)(Object(V.d)(t,"users",s.uid),(function(e){e.exists()&&(Ie.dispatch(ie(e.data().name)),Ie.dispatch(oe(e.data().favourites||[])))}));return function(){return e()}}}),[s]),Object(y.jsxs)(u.c,{children:[Object(y.jsx)(De,{path:"/search",component:xe}),Object(y.jsx)(De,{path:"/meal",component:Fe}),Object(y.jsx)(De,{path:"/favourites",component:Te}),Object(y.jsx)(De,{path:"/profile",component:Ne}),Object(y.jsx)(De,{path:"/",component:ve})]})},Be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,239)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),s(e),i(e)}))},Ae=n(94);i.a.render(Object(y.jsx)(J.a,{store:Ie,children:Object(y.jsx)(Ae.a,{children:Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(Re,{})})})}),document.getElementById("root")),Be()}},[[171,1,2]]]);
//# sourceMappingURL=main.e99313b0.chunk.js.map